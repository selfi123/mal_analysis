#!/usr/bin/env python3
"""
Build script for test malware sample
"""

import os
import subprocess
import sys

def build_executable():
    """Build the test malware executable"""
    print("Building test malware executable...")
    
    # Install PyInstaller if not already installed
    try:
        import PyInstaller
    except ImportError:
        print("Installing PyInstaller...")
        subprocess.check_call([sys.executable, "-m", "pip", "install", "pyinstaller"])
    
    # Build the executable
    cmd = [
        "pyinstaller",
        "--onefile",
        "--name", "test_malware",
        "--add-data", "SUSPICIOUS_STRINGS;.",
        "test_malware.py"
    ]
    
    subprocess.check_call(cmd)
    print("\nBuild completed successfully!")
    print("Executable created at: dist/test_malware.exe")
    print("\nYou can now test this file with the malware analyzer:")
    print("python main.py dist/test_malware.exe")

if __name__ == "__main__":
    build_executable() 